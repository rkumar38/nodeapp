<!doctype html>
<html lang="en">
  <%- include('partials/head') %>
   <body>
      <%- include('partials/navbar') %>
      <!-- Main jumbotron for a primary marketing message or call to action -->
       <div class="container stpage">
         <% if(success_msg.length > 0) { %>
          <div class="alert alert-success"><%=success_msg %></div>
          <% } %>
          <h2><%=title %></h1> 
        <table class="table table-hover ">
            <thead>
              <tr>
                 <th scope="col">Name</th>
                <th scope="col">User Name</th>
                <th scope="col">Email</th>
                <th scope="col">Edit</th>
                <th scope="col">Delete</th>
              </tr>
            </thead>
            <tbody>
             <% for(var i=0; i< users.length;i++){ %>
              <tr>
                <td><%=users[i].name%></td>
                <td><%=users[i].username %></td>
                <td><%=users[i].email %></td>
                <td><a href="/users/edit/<%=users[i].id%>">Edit</a></td>
                <td><a href="/users/delete/<%=users[i].id%>">Delete</a></td>
              </tr>
             <% }  %> 
        </tbody>
          </table>
          <% if (pages > 0) { %>
            <ul class="pagination justify-content-end">
                <% if (current == 1) { %>
                    <li class="page-item disabled"><a class="page-link">First</a></li>
                <% } else { %>
                    <li class="page-item"><a href="/users" class="page-link">First</a></li>
                <% } %>
                <% var i = (Number(current) > 3 ? Number(current) - 2 : 1) %>
                <% if (i !== 1) { %>
                    <li class="page-item disabled"><a class="page-link">...</a></li>
                <% } %>
                <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                    <% if (i == current) { %>
                        <li class="page-item active"><a class="page-link"><%= i %></a></li>
                    <% } else { %>
                        <li><a href="/users/<%= i %>" class="page-link"><%= i %></a></li>
                    <% } %>
                    <% if (i == Number(current) + 4 && i < pages) { %>
                        <li class="page-item disabled"><a class="page-link">...</a></li>
                    <% } %>
                <% } %>
                <% if (current == pages) { %>
                    <li class="page-item disabled"><a class="page-link">Last</a></li>
                <% } else { %>
                    <li><a href="/users/<%= pages %>" class="page-link">Last</a></li>
                <% } %>
            </ul>
        <% } %>         
      </div> <!-- /container -->

      <%- include('partials/footer') %>
  </body>
</html>
